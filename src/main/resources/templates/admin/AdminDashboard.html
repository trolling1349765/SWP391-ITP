<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <link rel="stylesheet" th:href="@{/assets/css/sidebar.css}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ITP System | Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #0f172a;
            overflow-x: hidden;
        }

        .sidebar-wrapper {
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            background: #0f172a;
            border-right: 1px solid #1f2937;
            padding: 0;
        }

        .main-content {
            min-height: 100vh;
            background-color: #fff;
            padding: 1.5rem;
        }
        footer {
            background-color: #0f172a;
            color: #e2e8f0;
            padding: 1rem;
            text-align: center;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>

<!-- Header -->
<div th:replace="~{/Included/Header :: header}"></div>

<div class="container-fluid">
    <div class="row g-0">

        <!-- Sidebar -->
        <div class="col-lg-2 sidebar-wrapper">
            <div th:replace="~{/Included/AdminSidebar :: adminSidebar (currentPath='')}"></div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-10 main-content">

            <header class="d-flex justify-content-between align-items-center border-bottom pb-3 mb-4">
                <h3 class="fw-bold mb-0">ITP System | Admin Panel</h3>
                <img th:src="@{/img/admin-avt.jpg}"
                     alt="Admin Avatar" class="rounded-circle" width="40" height="40">
            </header>

            <!-- Statistic Cards -->
            <div class="row g-3 mb-4 text-center">
                <div class="col-md-3">
                    <div class="card shadow-sm border-0 text-primary">
                        <div class="card-body">
                            <h5>Total Users</h5>
                            <h2 class="fw-bold">14</h2>
                            <p class="text-success small">+100% from last month</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm border-0 text-success">
                        <div class="card-body">
                            <h5>Active Shops</h5>
                            <h2 class="fw-bold">6</h2>
                            <p class="text-success small">+100% from last month</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm border-0 text-info">
                        <div class="card-body">
                            <h5>Total Orders</h5>
                            <h2 class="fw-bold">0</h2>
                            <p class="text-success small">+0% from last month</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm border-0 text-danger">
                        <div class="card-body">
                            <h5>Open Disputes</h5>
                            <h2 class="fw-bold">0</h2>
                            <p class="text-danger small">-0% from last month</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="row g-4 mb-4">
                <div class="col-md-7">
                    <div class="card shadow-sm border-0">
                        <div class="card-body">
                            <h5 class="fw-bold mb-3">Monthly Revenue</h5>
                            <canvas id="revenueChart" height="150"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="card shadow-sm border-0">
                        <div class="card-body">
                            <h5 class="fw-bold mb-3">User Roles Distribution</h5>
                            <canvas id="roleChart" height="150"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Users Table -->
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-body">
                    <h5 class="fw-bold mb-3">Recent Users</h5>
                    <div class="table-responsive">
                        <table class="table align-middle">
                            <thead class="table-light">
                            <tr>
                                <th>ID</th>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Created Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>#12847</td>
                                <td>john_doe</td>
                                <td>john@example.com</td>
                                <td><span class="badge bg-primary">Customer</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>2025-01-15</td>
                            </tr>
                            <tr>
                                <td>#12846</td>
                                <td>sarah_wilson</td>
                                <td>sarah@example.com</td>
                                <td><span class="badge bg-info text-dark">Shop Owner</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>2025-01-14</td>
                            </tr>
                            <tr>
                                <td>#12845</td>
                                <td>mike_admin</td>
                                <td>mike@itpsystem.com</td>
                                <td><span class="badge bg-danger">Admin</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>2025-01-13</td>
                            </tr>
                            <tr>
                                <td>#12844</td>
                                <td>emma_support</td>
                                <td>emma@itpsystem.com</td>
                                <td><span class="badge bg-warning text-dark">Support</span></td>
                                <td><span class="badge bg-secondary">Inactive</span></td>
                                <td>2025-01-12</td>
                            </tr>
                            <tr>
                                <td>#12843</td>
                                <td>alex_customer</td>
                                <td>alex@example.com</td>
                                <td><span class="badge bg-primary">Customer</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>2025-01-11</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="d-flex justify-content-start mt-3 gap-2">
                        <button class="btn btn-success">+ Add New Admin</button>
                        <button class="btn btn-primary">Export Report</button>
                        <button class="btn btn-dark">Activity Logs</button>
                    </div>
                </div>
            </div>

            <footer>2025 © ITP System — Admin Panel v1.0</footer>
        </div>
    </div>
</div>

<script>
    // Biểu đồ doanh thu
    const ctx = document.getElementById('revenueChart');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            datasets: [{
                label: 'Revenue (₫)',
                data: [25, 35, 45, 50, 60, 65, 70, 75, 80, 90, 95, 100],
                backgroundColor: '#3b82f6'
            }]
        },
        options: { responsive: true, plugins: { legend: { display: false } } }
    });

    // Biểu đồ vai trò người dùng
    const roleCtx = document.getElementById('roleChart');
    new Chart(roleCtx, {
        type: 'pie',
        data: {
            labels: ['Customers', 'Shop Owners', 'Admins', 'Support'],
            datasets: [{
                data: [72, 22, 5, 1],
                backgroundColor: ['#3b82f6', '#22c55e', '#ef4444', '#facc15']
            }]
        }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
