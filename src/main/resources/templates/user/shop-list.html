<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Danh sách Shop | Item Trading Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .shop-card {
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            height: 100%;
        }
        .shop-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .shop-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #f8f9fa;
        }
        .badge-active {
            background-color: #28a745;
        }
    </style>
</head>
<body>

<!-- Header -->
<div th:replace="~{/Included/Header :: header}"></div>

<div class="container py-5">
    <!-- Page Title -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="fw-bold mb-2">
                <i class="fas fa-store text-primary me-2"></i>Danh sách Shop
            </h2>
            <p class="text-muted">Khám phá các shop uy tín trên nền tảng</p>
        </div>
    </div>

    <!-- Shop Grid -->
    <div class="row g-4" th:if="${shops != null and !shops.isEmpty()}">
        <div class="col-md-4 col-lg-3" th:each="shop : ${shops}">
            <a th:href="@{/customer/shop/{id}(id=${shop.id})}" class="text-decoration-none">
                <div class="card shop-card border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <!-- Shop Avatar -->
                        <img th:src="${shop.imageUrl != null ? shop.imageUrl : 'https://via.placeholder.com/150'}"
                             alt="Shop Avatar"
                             class="shop-avatar mb-3">

                        <!-- Shop Name -->
                        <h5 class="card-title fw-bold mb-2" th:text="${shop.shopName}">Shop Name</h5>

                        <!-- Category -->
                        <p class="text-muted small mb-2">
                            <i class="fas fa-tag me-1"></i>
                            <span th:text="${shop.category != null ? shop.category : 'Chưa phân loại'}">Category</span>
                        </p>

                        <!-- Rating -->
                        <div class="mb-2" th:if="${shop.rating != null}">
                            <i class="fas fa-star text-warning"></i>
                            <span class="fw-semibold" th:text="${shop.rating}">4.5</span>
                            <span class="text-muted small">/5</span>
                        </div>

                        <!-- Status Badge -->
                        <span class="badge badge-active text-white">
                            <i class="fas fa-check-circle me-1"></i>Đang hoạt động
                        </span>

                        <!-- Description Preview -->
                        <p class="text-muted small mt-3 mb-0"
                           th:text="${shop.description != null ? (shop.description.length() > 60 ? shop.description.substring(0, 60) + '...' : shop.description) : 'Chưa có mô tả'}">
                            Shop description...
                        </p>
                    </div>

                    <div class="card-footer bg-light border-0">
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">
                                <i class="fas fa-box me-1"></i>
                                <span th:text="${shop.products != null ? shop.products.size() : 0}">0</span> sản phẩm
                            </small>
                            <small class="text-primary fw-semibold">
                                Xem shop <i class="fas fa-arrow-right ms-1"></i>
                            </small>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <!-- Empty State -->
    <div th:if="${shops == null or shops.isEmpty()}" class="text-center py-5">
        <i class="fas fa-store fa-4x text-muted mb-3"></i>
        <h4 class="text-muted">Chưa có shop nào</h4>
        <p class="text-muted">Hãy quay lại sau để khám phá các shop mới!</p>
    </div>

    <!-- Pagination -->
    <nav th:if="${totalPages > 1}" class="mt-5">
        <ul class="pagination justify-content-center">
            <!-- Previous Button -->
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                <a class="page-link" th:href="@{/customer/shop/list(page=${currentPage - 1}, size=12)}">
                    <i class="fas fa-chevron-left"></i>
                </a>
            </li>

            <!-- Page Numbers -->
            <li th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                class="page-item"
                th:classappend="${i == currentPage} ? 'active'">
                <a class="page-link" th:href="@{/customer/shop/list(page=${i}, size=12)}" th:text="${i + 1}">1</a>
            </li>

            <!-- Next Button -->
            <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                <a class="page-link" th:href="@{/customer/shop/list(page=${currentPage + 1}, size=12)}">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Summary Info -->
    <div class="text-center mt-3">
        <small class="text-muted">
            Hiển thị <span th:text="${shops.size()}">0</span> trong tổng số
            <span th:text="${totalItems}">0</span> shop
        </small>
    </div>
</div>

<!-- Footer -->
<div th:replace="~{/Included/Footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

