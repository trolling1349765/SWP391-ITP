<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"/><title>Shop Owner Sidebar</title>
    <style>.active{background:#1f2937}</style></head>
<body>
<aside th:fragment="sidebar"
       style="position:sticky;top:0;height:100vh;background:#0f172a;color:#e2e8f0;display:flex;flex-direction:column;border-right:1px solid #1f2937;margin:0;padding:0;">
    <div style="display:flex;align-items:center;gap:.5rem;padding:1rem 1.25rem;border-bottom:1px solid #1f2937;">
        <span style="width:28px;height:28px;border-radius:6px;background:#22c55e;display:inline-block;"></span>
        <div><div style="font-weight:700;letter-spacing:.3px;">Item Trading Platform</div>
            <small style="color:#94a3b8;">Shop Owner Console</small></div>
    </div>

    <div style="flex:1;overflow:auto;padding:.5rem 0;">
        <div style="padding:.75rem 1rem .25rem;font-size:.75rem;color:#94a3b8;text-transform:uppercase;letter-spacing:.06em;">Overview</div>
        <ul style="list-style:none;margin:0;padding:.25rem;">
            <li>
                <a th:href="@{/shop/dashboard}"
                   th:classappend="${#strings.contains(#request.requestURI,'/shop/dashboard')}? ' active'"
                   style="display:flex;align-items:center;gap:.75rem;padding:.6rem 1rem;border-radius:.6rem;color:#cbd5e1;text-decoration:none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" style="width:18px;height:18px;opacity:.9;">
                        <path d="M3 12l9-9 9 9"/><path d="M9 22V12h6v10"/></svg><span>Dashboard</span>
                </a>
            </li>
            <li>
                <a th:href="@{/shop/addProduct}"
                   th:classappend="${#strings.contains(#request.requestURI,'/shop/addProduct')}? ' active'"
                   style="display:flex;align-items:center;gap:.75rem;padding:.6rem 1rem;border-radius:.6rem;color:#cbd5e1;text-decoration:none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" style="width:18px;height:18px;opacity:.9;">
                        <path d="M12 5v14M5 12h14"/></svg><span>Thêm sản phẩm</span>
                </a>
            </li>
            <li>
                <a th:href="@{/shop/inventory}"
                   th:classappend="${#strings.contains(#request.requestURI,'/shop/inventory')}? ' active'"
                   style="display:flex;align-items:center;gap:.75rem;padding:.6rem 1rem;border-radius:.6rem;color:#cbd5e1;text-decoration:none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" style="width:18px;height:18px;opacity:.9;">
                        <rect x="3" y="4" width="18" height="13" rx="2"/><path d="M16 21H8"/></svg><span>Kho hàng</span>
                </a>
            </li>
        </ul>
    </div>

    <div style="padding:.75rem 1rem;border-top:1px solid #1f2937;font-size:.8rem;color:#94a3b8;">
        <div th:text="${#dates.format(#dates.createNow(),'yyyy')} + ' © ITP'">2025 © ITP</div>
        <div style="opacity:.8">Seller Sidebar v1.0</div>
    </div>
</aside>
</body>
</html>
``` :contentReference[oaicite:0]{index=0}

---

### 2) `shop/dashboard.html`  (đổi ảnh `p.image`, thay fragment `:: sidebar`)
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8"/><title>Shop Dashboard</title>
    <style>
        body{background:#0b1220;color:#e5e7eb;font-family:ui-sans-serif,system-ui;margin:0}
        .page{display:flex;min-height:100vh}.content{flex:1;padding:16px}
        .actions{margin-bottom:12px;display:flex;gap:10px}
        .btn{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:#fff;text-decoration:none;cursor:pointer}
        table{width:100%;border-collapse:collapse}th,td{padding:8px;border:1px solid #1f2937;vertical-align:top}th{background:#1f2937;text-align:left}
        img{max-height:60px;display:block}.ok{color:#4ade80;margin:8px 0}.err{color:#f87171;margin:8px 0}
    </style>
</head>
<body>
<div th:replace="~{Included/Header :: header}"></div>

<div class="page">
    <aside th:replace="~{Included/ShopSidebar :: sidebar}"></aside>

    <main class="content">
        <h2>Danh sách sản phẩm</h2>
        <div th:if="${ok}" class="ok" th:text="${ok}"></div>
        <div th:if="${err}" class="err" th:text="${err}"></div>

        <div class="actions">
            <a th:href="@{/shop/addProduct}" class="btn">Thêm Sản Phẩm</a>
            <a th:href="@{/shop/inventory}" class="btn">Quản Lý Kho</a>
        </div>

        <table>
            <thead><tr>
                <th>ID</th><th>Tên</th><th>Mô tả</th><th>Giá</th><th>Tồn kho</th><th>Status</th><th>Ảnh</th><th>Thao tác</th>
            </tr></thead>
            <tbody>
            <tr th:each="p : ${products}">
                <td th:text="${p.id}">1</td>
                <td th:text="${p.productName}">Tên</td>
                <td th:text="${p.description}">Mô tả</td>
                <td th:text="${#numbers.formatCurrency(p.price)}">0</td>
                <td th:text="${stockMap[p.id]}">0</td>
                <td th:text="${p.status}">HIDDEN</td>
                <td><img th:if="${p.image}" th:src="${p.image}" alt="img"/></td>
                <td><a th:href="@{/shop/updateProduct/{id}(id=${p.id})}" class="btn">Sửa</a></td>
            </tr>
            </tbody>
        </table>
    </main>
</div>

<div th:replace="~{Included/Footer :: footer}"></div>
</body>
</html>
``` :contentReference[oaicite:1]{index=1}

---

### 3) `shop/addProduct.html`  (optional category, giữ `file` đúng DTO)
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8"/><title>Thêm sản phẩm</title>
    <style>
        body{background:#0b1220;color:#e5e7eb;font-family:ui-sans-serif,system-ui;margin:0}
        .page{display:flex;min-height:100vh}.content{flex:1;padding:16px;max-width:920px}
        label{display:block;margin:8px 0 4px;color:#9ca3af}
        input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid #1f2937;background:#0b1220;color:#e5e7eb}
        .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}.actions{margin-top:12px;display:flex;gap:10px}
        .btn{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:#fff;text-decoration:none;cursor:pointer}
    </style>
</head>
<body>
<div th:replace="~{Included/Header :: header}"></div>

<div class="page">
    <aside th:replace="~{Included/ShopSidebar :: sidebar}"></aside>

    <main class="content">
        <h2>Thêm sản phẩm</h2>

        <form th:action="@{/shop/addProduct}" th:object="${form}" method="post" enctype="multipart/form-data">
            <label>Tên sản phẩm</label>
            <input th:field="*{productName}" placeholder="Nhập tên..." required/>

            <div class="row">
                <div>
                    <label>Giá</label>
                    <input th:field="*{price}" type="number" min="0" step="0.01" placeholder="Giá" required/>
                </div>

                <!-- Chỉ hiển thị nếu có categories; nếu không, gửi hidden giữ nguyên -->
                <div th:if="${categories != null}">
                    <label>Danh mục</label>
                    <select th:field="*{categoryId}">
                        <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.categoryName}">Cat</option>
                    </select>
                </div>
                <input th:if="${categories == null}" type="hidden" th:field="*{categoryId}"/>
            </div>

            <label>Mô tả</label>
            <textarea th:field="*{description}" rows="4" placeholder="Mô tả"></textarea>

            <label>Ảnh sản phẩm (jpg/png/webp)</label>
            <input type="file" th:field="*{file}" accept=".jpg,.jpeg,.png,.webp"/>

            <div class="actions">
                <button class="btn" type="submit">Tạo</button>
                <a th:href="@{/shop/dashboard}" class="btn">Hủy</a>
            </div>
        </form>
    </main>
</div>

<div th:replace="~{Included/Footer :: footer}"></div>
</body>
</html>
``` :contentReference[oaicite:2]{index=2}

---

### 4) `shop/updateProduct.html`  (ảnh dùng `product.image`, optional category)
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8"/><title>Cập nhật sản phẩm</title>
    <style>
        body{background:#0b1220;color:#e5e7eb;font-family:ui-sans-serif,system-ui;margin:0}
        .page{display:flex;min-height:100vh}.content{flex:1;padding:16px;max-width:920px}
        label{display:block;margin:8px 0 4px;color:#9ca3af}
        input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid #1f2937;background:#0b1220;color:#e5e7eb}
        .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}.actions{margin-top:12px;display:flex;gap:10px}
        .btn{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:#fff;cursor:pointer}
        .hint{color:#9ca3af;font-size:12px} img{max-height:100px;display:block;margin-bottom:8px}
    </style>
</head>
<body>
<div th:replace="~{Included/Header :: header}"></div>

<div class="page">
    <aside th:replace="~{Included/ShopSidebar :: sidebar}"></aside>

    <main class="content">
        <h2 th:text="'Cập nhật sản phẩm #' + ${productId}"></h2>

        <form th:action="@{'/shop/updateProduct/' + ${productId}}" th:object="${form}" method="post" enctype="multipart/form-data">
            <label>Tên sản phẩm</label>
            <input th:field="*{productName}" required/>

            <div class="row">
                <div>
                    <label>Giá</label>
                    <input th:field="*{price}" type="number" min="0" step="0.01" required/>
                </div>

                <div th:if="${categories != null}">
                    <label>Danh mục</label>
                    <select th:field="*{categoryId}">
                        <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.categoryName}">Cat</option>
                    </select>
                </div>
                <input th:if="${categories == null}" type="hidden" th:field="*{categoryId}"/>
            </div>

            <label>Mô tả</label>
            <textarea th:field="*{description}" rows="4"></textarea>

            <label>Ảnh hiện tại:</label>
            <img th:if="${product.image}" th:src="${product.image}" alt="current"/>

            <input type="hidden" th:field="*{img}" th:value="${product.image}"/>

            <label>Ảnh mới (tùy chọn
                <!DOCTYPE html>
                <html xmlns:th="http://www.thymeleaf.org">
                <head><meta charset="UTF-8"/><title>Shop Owner Sidebar</title>
                    <style>.active{background:#1f2937}</style></head>
                <body>
                <aside th:fragment="sidebar"
                       style="position:sticky;top:0;height:100vh;background:#0f172a;color:#e2e8f0;display:flex;flex-direction:column;border-right:1px solid #1f2937;margin:0;padding:0;">
                    <div style="display:flex;align-items:center;gap:.5rem;padding:1rem 1.25rem;border-bottom:1px solid #1f2937;">
                        <span style="width:28px;height:28px;border-radius:6px;background:#22c55e;display:inline-block;"></span>
                        <div><div style="font-weight:700;letter-spacing:.3px;">Item Trading Platform</div>
                            <small style="color:#94a3b8;">Shop Owner Console</small></div>
                    </div>

                    <div style="flex:1;overflow:auto;padding:.5rem 0;">
                        <div style="padding:.75rem 1rem .25rem;font-size:.75rem;color:#94a3b8;text-transform:uppercase;letter-spacing:.06em;">Overview</div>
                        <ul style="list-style:none;margin:0;padding:.25rem;">
                            <li>
                                <a th:href="@{/shop/dashboard}"
                                   th:classappend="${#strings.contains(#request.requestURI,'/shop/dashboard')}? ' active'"
                                   style="display:flex;align-items:center;gap:.75rem;padding:.6rem 1rem;border-radius:.6rem;color:#cbd5e1;text-decoration:none;">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" style="width:18px;height:18px;opacity:.9;">
                                        <path d="M3 12l9-9 9 9"/><path d="M9 22V12h6v10"/></svg><span>Dashboard</span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{/shop/addProduct}"
                                   th:classappend="${#strings.contains(#request.requestURI,'/shop/addProduct')}? ' active'"
                                   style="display:flex;align-items:center;gap:.75rem;padding:.6rem 1rem;border-radius:.6rem;color:#cbd5e1;text-decoration:none;">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" style="width:18px;height:18px;opacity:.9;">
                                        <path d="M12 5v14M5 12h14"/></svg><span>Thêm sản phẩm</span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{/shop/inventory}"
                                   th:classappend="${#strings.contains(#request.requestURI,'/shop/inventory')}? ' active'"
                                   style="display:flex;align-items:center;gap:.75rem;padding:.6rem 1rem;border-radius:.6rem;color:#cbd5e1;text-decoration:none;">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" style="width:18px;height:18px;opacity:.9;">
                                        <rect x="3" y="4" width="18" height="13" rx="2"/><path d="M16 21H8"/></svg><span>Kho hàng</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div style="padding:.75rem 1rem;border-top:1px solid #1f2937;font-size:.8rem;color:#94a3b8;">
                        <div th:text="${#dates.format(#dates.createNow(),'yyyy')} + ' © ITP'">2025 © ITP</div>
                        <div style="opacity:.8">Seller Sidebar v1.0</div>
                    </div>
                </aside>
                </body>
                </html>
                ``` :contentReference[oaicite:0]{index=0}

                ---

                ### 2) `shop/dashboard.html`  (đổi ảnh `p.image`, thay fragment `:: sidebar`)
                ```html
                <!DOCTYPE html>
                <html xmlns:th="http://www.thymeleaf.org" lang="vi">
                <head>
                    <meta charset="UTF-8"/><title>Shop Dashboard</title>
                    <style>
                        body{background:#0b1220;color:#e5e7eb;font-family:ui-sans-serif,system-ui;margin:0}
                        .page{display:flex;min-height:100vh}.content{flex:1;padding:16px}
                        .actions{margin-bottom:12px;display:flex;gap:10px}
                        .btn{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:#fff;text-decoration:none;cursor:pointer}
                        table{width:100%;border-collapse:collapse}th,td{padding:8px;border:1px solid #1f2937;vertical-align:top}th{background:#1f2937;text-align:left}
                        img{max-height:60px;display:block}.ok{color:#4ade80;margin:8px 0}.err{color:#f87171;margin:8px 0}
                    </style>
                </head>
                <body>
                <div th:replace="~{Included/Header :: header}"></div>

                <div class="page">
                    <aside th:replace="~{Included/ShopSidebar :: sidebar}"></aside>

                    <main class="content">
                        <h2>Danh sách sản phẩm</h2>
                        <div th:if="${ok}" class="ok" th:text="${ok}"></div>
                        <div th:if="${err}" class="err" th:text="${err}"></div>

                        <div class="actions">
                            <a th:href="@{/shop/addProduct}" class="btn">Thêm Sản Phẩm</a>
                            <a th:href="@{/shop/inventory}" class="btn">Quản Lý Kho</a>
                        </div>

                        <table>
                            <thead><tr>
                                <th>ID</th><th>Tên</th><th>Mô tả</th><th>Giá</th><th>Tồn kho</th><th>Status</th><th>Ảnh</th><th>Thao tác</th>
                            </tr></thead>
                            <tbody>
                            <tr th:each="p : ${products}">
                                <td th:text="${p.id}">1</td>
                                <td th:text="${p.productName}">Tên</td>
                                <td th:text="${p.description}">Mô tả</td>
                                <td th:text="${#numbers.formatCurrency(p.price)}">0</td>
                                <td th:text="${stockMap[p.id]}">0</td>
                                <td th:text="${p.status}">HIDDEN</td>
                                <td><img th:if="${p.image}" th:src="${p.image}" alt="img"/></td>
                                <td><a th:href="@{/shop/updateProduct/{id}(id=${p.id})}" class="btn">Sửa</a></td>
                            </tr>
                            </tbody>
                        </table>
                    </main>
                </div>

                <div th:replace="~{Included/Footer :: footer}"></div>
                </body>
                </html>
                ``` :contentReference[oaicite:1]{index=1}

                ---

                ### 3) `shop/addProduct.html`  (optional category, giữ `file` đúng DTO)
                ```html
                <!DOCTYPE html>
                <html xmlns:th="http://www.thymeleaf.org" lang="vi">
                <head>
                    <meta charset="UTF-8"/><title>Thêm sản phẩm</title>
                    <style>
                        body{background:#0b1220;color:#e5e7eb;font-family:ui-sans-serif,system-ui;margin:0}
                        .page{display:flex;min-height:100vh}.content{flex:1;padding:16px;max-width:920px}
                        label{display:block;margin:8px 0 4px;color:#9ca3af}
                        input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid #1f2937;background:#0b1220;color:#e5e7eb}
                        .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}.actions{margin-top:12px;display:flex;gap:10px}
                        .btn{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:#fff;text-decoration:none;cursor:pointer}
                    </style>
                </head>
                <body>
                <div th:replace="~{Included/Header :: header}"></div>

                <div class="page">
                    <aside th:replace="~{Included/ShopSidebar :: sidebar}"></aside>

                    <main class="content">
                        <h2>Thêm sản phẩm</h2>

                        <form th:action="@{/shop/addProduct}" th:object="${form}" method="post" enctype="multipart/form-data">
                            <label>Tên sản phẩm</label>
                            <input th:field="*{productName}" placeholder="Nhập tên..." required/>

                            <div class="row">
                                <div>
                                    <label>Giá</label>
                                    <input th:field="*{price}" type="number" min="0" step="0.01" placeholder="Giá" required/>
                                </div>

                                <!-- Chỉ hiển thị nếu có categories; nếu không, gửi hidden giữ nguyên -->
                                <div th:if="${categories != null}">
                                    <label>Danh mục</label>
                                    <select th:field="*{categoryId}">
                                        <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.categoryName}">Cat</option>
                                    </select>
                                </div>
                                <input th:if="${categories == null}" type="hidden" th:field="*{categoryId}"/>
                            </div>

                            <label>Mô tả</label>
                            <textarea th:field="*{description}" rows="4" placeholder="Mô tả"></textarea>

                            <label>Ảnh sản phẩm (jpg/png/webp)</label>
                            <input type="file" th:field="*{file}" accept=".jpg,.jpeg,.png,.webp"/>

                            <div class="actions">
                                <button class="btn" type="submit">Tạo</button>
                                <a th:href="@{/shop/dashboard}" class="btn">Hủy</a>
                            </div>
                        </form>
                    </main>
                </div>

                <div th:replace="~{Included/Footer :: footer}"></div>
                </body>
                </html>
                ``` :contentReference[oaicite:2]{index=2}

                ---

                ### 4) `shop/updateProduct.html`  (ảnh dùng `product.image`, optional category)
                ```html
                <!DOCTYPE html>
                <html xmlns:th="http://www.thymeleaf.org" lang="vi">
                <head>
                    <meta charset="UTF-8"/><title>Cập nhật sản phẩm</title>
                    <style>
                        body{background:#0b1220;color:#e5e7eb;font-family:ui-sans-serif,system-ui;margin:0}
                        .page{display:flex;min-height:100vh}.content{flex:1;padding:16px;max-width:920px}
                        label{display:block;margin:8px 0 4px;color:#9ca3af}
                        input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid #1f2937;background:#0b1220;color:#e5e7eb}
                        .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}.actions{margin-top:12px;display:flex;gap:10px}
                        .btn{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:#fff;cursor:pointer}
                        .hint{color:#9ca3af;font-size:12px} img{max-height:100px;display:block;margin-bottom:8px}
                    </style>
                </head>
                <body>
                <div th:replace="~{Included/Header :: header}"></div>

                <div class="page">
                    <aside th:replace="~{Included/ShopSidebar :: sidebar}"></aside>

                    <main class="content">
                        <h2 th:text="'Cập nhật sản phẩm #' + ${productId}"></h2>

                        <form th:action="@{'/shop/updateProduct/' + ${productId}}" th:object="${form}" method="post" enctype="multipart/form-data">
                            <label>Tên sản phẩm</label>
                            <input th:field="*{productName}" required/>

                            <div class="row">
                                <div>
                                    <label>Giá</label>
                                    <input th:field="*{price}" type="number" min="0" step="0.01" required/>
                                </div>

                                <div th:if="${categories != null}">
                                    <label>Danh mục</label>
                                    <select th:field="*{categoryId}">
                                        <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.categoryName}">Cat</option>
                                    </select>
                                </div>
                                <input th:if="${categories == null}" type="hidden" th:field="*{categoryId}"/>
                            </div>

                            <label>Mô tả</label>
                            <textarea th:field="*{description}" rows="4"></textarea>

                            <label>Ảnh hiện tại:</label>
                            <img th:if="${product.image}" th:src="${product.image}" alt="current"/>

                            <input type="hidden" th:field="*{img}" th:value="${product.image}"/>

                            <label>Ảnh mới (tùy chọn
